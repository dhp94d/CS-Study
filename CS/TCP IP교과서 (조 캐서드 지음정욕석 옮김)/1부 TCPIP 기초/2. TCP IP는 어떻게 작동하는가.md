# TCP/IP는 어떻게 작동하는가

목차

1. TCP/IP 프로토콜 시스템
2. TCP/IP 그리고 OSI 모델
3. 데이터 패키지
4. TCP/IP 네트워킹에 대한 간략한 설명



배울 내용

- TCP/IP 프로토콜 시스템
- OSI 모델
- 데이터 패키지
- TCP/IP 프로토콜 상호 작용 방식



TCP/IP는 프로토콜의 시스템(또는 스위트)이며, 프로토콜은 규칙과 절차의 시스템입니다. 대부분의 경우, 통신 컴퓨터의 하드웨어 및 소프트웨어는 TCP/IP 통신 규칙을 따릅니다.

이번 장에서는 TCP/IP 프로토콜 시스템으 설명하고 어떻게 TCP/IP 구성요소가 함꼐 작동해서 네트워크를 통해 데이터를 보내고 받는지 알아보겠습니다.



목표

- TCP/IP 프로토콜 시스템 계층과 각 계층의 목적을 설명할 수 있어야 한다.
- OSI 모델의 계층과 OSI 계층이 TCP/IP와 어떤 관련이 있는지 설명할 수 있어야 한다.
- TCP/IP 프로토콜 헤더와 프로토콜 스택의 각 계층에서 데이터가 어떻게 헤더 정보에 포함되는지 설명할 수 있어야 한다.
- TCP/IP 스택의 각 계층에서 데이터 패키지 이름을 말할 수 있어야 한다.
- TCP, UDP 및 Ip 프로토콜과 함꼐 작동해서 TCP/IP 기능을 제공하는 방법을 설명할 수 있어야 한다.



## 1. TCP/IP 프로토콜 시스템

TCP/IP와 같은 프로토콜 시스템은 반드시 다음 작업을 담당해야 합니다.

- 전송 매체를 통해 메세지를 효율적으로 전달할 수 있게 관리 가능한 데이터로 나누기
- 네트워크 어댑터 하드웨어와 인터페이스 하기
- 주소 지정하기(송신 컴퓨터는 보내고자 하는 데이터를 수신 컴퓨토로 주소로 지정해야하며 수신 컴퓨터는 수신해야 하는 메세지를 인식할 수 있어야 합니다.)

- 소스 서브넷과 대상 서브넷이 서로 다른 물리적인 네트워크인 경우에도 대상 컴퓨터의 서브넷으로 데이터 라우팅하기
- 오류 제어, 흐름 제어 및 승인 수행하기(안정적인 통신을 위해 송수신 컴퓨터는 잘못된 전송을 식별, 수정하고 데이터 흐름을 제어할 수 있어야 합니다.)

- 애플리케이션에서 데이터를 수락해 네트워크로 전달하기
- 네트워크에서 데이터를 수신해 애플리케이션으로 전달하기

이 작업을 수행하기 위해 TCP/IP 설계자는 모듈식 설계를 했습니다. TCP/IP 프로토콜 시스템은 이론적으로 서로 독립적 기능을 하는 구성 요소로 나뉘며, 각 구성 요소는 통신 프로세스를 담당합니다.



모듈식 설계의 장점

- 공급 업체가 프로토콜 소프트웨어를 특정 하드웨어 및 운영 체제에 쉽게 적용할 수 있다는 장점이 있습니다.

  => 네트워크 접근 계층은 물리적 네트워크의 사양 및 설계와 관련된 기능을 포함함, 이 덕분에 마이크로 소프트같은 공급 업체는 (일반 이더넷 네트워크의 TCP/IP와 는 반대로) 광섬유 네트워크에 전혀 다른 TCP/IP소프트웨어 패키지를 구축할 필요가 없음. 게다가 상위 계층은 다른 물리적 아키텍처의 영향을 받지 않으며 네트워크 접근 계층만 변경되면 됨



TCP/IP 프로토콜 시스템은 계층화된 구성 요소로 세분화되며 각 구성 요소는 특정 업무를 수행함, 이러한 모델이나 스택은 초기 TCP/IP에서 가져왔으며 종종 TCP/IP모델이라고도 함



![image](https://user-images.githubusercontent.com/68668924/112112852-630f5980-8bf9-11eb-9690-146cde7bfa1a.png) 



- 네트워크 계층: 물리적 네트워크와의 인터페이스를 제공합니다. 전송 매체의 데이터를 포맷하고 물리적 하드웨어 주소를 기반으로 서브넷 데이터를 처리합니다. 실제 네트워크에서 전달되는 데이터에 대한 오류 제어 기능을 합니다.
- 인터넷 계층: 하드웨어와 독립적으로 주소를 지정하는 기능을 통해 물리적 아키텍처가 다른 서브넷 간에 데이터를 전달합니다.
- 전송 계층: 인터네트워크에 대한 흐름 제어, 오류 제어 및 승인 서비스를 담당하며 네트워크 애플리케이션을 위한 인터페이스 역할을 합니다.
- 응용 계층: 네트워크 문제 해결, 파일 전송, 원격 제어 및 인터넷 활동을 위한 애플리케이션을 제공합니다. 또한 특정 운영 환경을 위해 작성된 프로그램이 네트워크에 접근할 수 있도록 네트워크 API를 지원합니다.



TCP/IP 프로토콜 소프트웨어가 네트워크를 통해 전송할 데이터를 준비할 떄 송신 시스템의 각 계층은 수신 시스템에 상응하는 계층 관련 데이터를 정보 계층에 추가합니다. ex) 데이터를 전송하는 컴퓨터의 인터넷 계층은 메시지를 수신하는 컴퓨터의 인터넷 계층에 중요한 정보가 포함된 헤더를 포함함

이 프로세스를 캡슐화라고도 합니다. 수신 시스템에서 데이터가 프로토콜 스택으로 전달되면 헤더가 제거됩니다.



## 2. TCP/IP 그리고 OSI 모델

네트워크 산업에는 네트워크 프로토콜 아키텍처를 위한 OSI 모델이라는 표준 7계층 모델이 있습니다. OSI 모델은 국제 표준 기구인 ISO가 네트워크 프로토콜 시스템의 설계를 표준화해 소프트웨어 개발자의 프로토콜 표준에 대한 상호 연결 및 개방형 접근을 촉진하려는 노력의 산물입니다.

TCP/IP는 OSI 모델을 따르지 않으나 두 모델의 목표는 비슷했기 때문에 논의를 통해 호환될 수 있습니다. OSI 용어가 일반적으로 TCP/IP에 적용되는 것을 볼 수 있습니다.

![image](https://user-images.githubusercontent.com/68668924/112116184-5a208700-8bfd-11eb-85e1-52812f3d4c0a.png) 

위 그림은 TCP/Ip 표준과 7계층 OSI 모드 간의 관계를 보여줍니다.

OSI 계층은 응용계층의 업무를 응용,표현,세션, 새 계층으로 나누며, 접근 계층의 활동을 데이터 링크 계층과 물리 계층으로 나눕니다. 이처럼 세분화를 통해 개발자가 유연하게 작업할 수 있도록 합니다. 특히 네트워크 접근 계층을 데이터링크 계층과 물리 계층으로 분할함으로써 통신 매체 접근과 관련된 기능에서 통신 구성과 관련도니 기능을 분리합니다.



- 물리 계층 : 데이터를 실제 전송 매체를 지나는 전기 또는 아날로그 펄스 스트림으로 변환하며 데이터 전송을 감독합니다.
- 데이터 링크 계층: 네트워크 어댑터와 인터페이스를 제공하며 서브넷의 논리적 링크를 유지합니다.
- 네트워크 계층: 논리 주소를 지정하고 라우팅을 지원합니다.
- 전송 계층: 인터네트워크에 대한 오류 제어 및 흐름 제어를 제공합니다.
- 세션 계층: 통신 컴퓨터의 통신 애플리케이션 간의 세션을 설정합니다.
- 표현 계층: 데이터를 표준 형식으로 변호나합니다 .암호화 및 데이터 압축을 관리합니다.
- 응용 계층: 애플리케이션을 위한 네트워크 인터페이스를 제공하며 파일 전송, 통신 등을 위한 네트워크 애플리케이션을 지원합니다.



TCP/Ip 모델과 OSI 모델은 구현이 아니라 표준이라는 것을 기억해야 합니다. 실제 구현이 이 모델들 처럼 깔끔하게 매핑되지는 않습니다.

OSI 및 TCP/IP 모델은 중요한 전송 및 인터넷 계층에서 가장 유사합니다. 



## 2.3 데이터 패키지

TCP/IP 프로토콜 스택에서 각 계층은 전체 통신 프로세스에서 특정 역할을 수행한다는 것을 꼭 기억해야 합니다. 각 계층은 해당 계층이 역할을 수행하는데 필요한 서비스를 호출합니다.

 전송 데이터가 스택을 통과하면서 각 계층에는 실제 데이터와 함께 **헤더**라는 관련 정보 묶음이 포함됩니다. 헤더와 데이터를 포함하는 작은 데이터 패키지는 아래 그림과 같이 이동하며 수신 컴퓨터에서 데이터를 수신하면 역  프로세스가 발생합니다. 데이터가 스택을 통해 위로 이동하면 각 계층은 상응하는 헤더의 압축을 풀어 해당 정보를 사용합니다.



![image](https://user-images.githubusercontent.com/68668924/112119200-7e319780-8c00-11eb-8da5-47b1696476c8.png) 





데이터 패킷은 계층마다 다른 모습과 이름으로 표시되며, 각 계층에서 생성된 데이터 패키지의 이름은 다음과 같습니다.



- 응용 계층에서 생성된 데이터 패키지를 메시지라고 합니다.
- 응용 계층 메시지를 캡슐화하는 전송 계층에서 생성된 데이터 패키지를 전송 계층의 TCP프로토콜에서 가져왔다면 세그먼트 라고 합니다. 데이터 패키지를 전송 계층의 UDP 프로토콜에서 가져왔다면 이를 데이터그램이라고 합니다.
- 전송 계층 세그먼트를 캡슐화하는 인터넷 계층의 데이터 패키지는 데이터 그램이라고 합니다.
- 데이터그램을 캡슐화하고 세분화할 수 있는 네트워크 접근 계층의 데이터 패키지는 프레임이라고 합니다.

요즘은 서로 다른 프로토콜 패키지 이름을 사용하지 않고 패킷이라는 단어로 사용합니다.

