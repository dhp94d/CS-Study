# 리액트



## 1.1 리액트

이런 유형의 프레임워크(라이브러리)들은 주로 MVC, MVVC 아키텍쳐를 사용합니다.

MVC,MVVM,MVW등과 같은 여러 구조가 지닌 공통점은 모델과 뷰가 있습니다.

- 모델:  애플리케이션에서 데이터를 관리하는 영역
- 뷰: 사용자에게 보이는 부분
- 컨트롤러: 프로그램이 사용자에게서 어떤 작업(버턴, 텍스트 입력)을 받으면 컨트롤러는 모델 데이터를 조회하거나 수정하고, 변경된 사항을 뷰에 반영합니다.



반영하는 과정에서 보통 뷰를 변형함 이 때 앱 규모가 크면 요소를 찾아 변경하는 작업이 복잡해짐



페이스북 개발 팀은 이를 해결하기 위해 아이디어를 냄

=> 어떤 데이터가 변할 떄마다 어떤 변화를 줄지 고민하는 것이 아닌 기존 뷰를 날려버리고, 처음부터 새로 렌더링 하는 방식



리액트는 자바스크립트 라이브러리로 사용자 인터페이스를 만드는데 사용함. 구조가 MVC, MVW 등인 프레임워크와 달리 오직 V만 신경쓰는 라이브러리



리액트 프로젝트에서  특정 부분이 어떻게 생길지 선언체가 있는데 이를 컴포넌트라고 함. 템플릿과는 다름

 템플릿은 보통 데이터셋 주어지면 HTML 태그 형식을 문자열으로 반환하는데 컴포넌트는 재사용 가능한 API로 수많은 기능을 내장하고 있음. 컴포넌트 하나에서 해당 컴포넌트의 생김새와 작동 방식을 정의함



사용자 화면에 뷰를 보여주는 것을 렌더링이라고함. 리액트 라이브러리는 뷰를 어떻게 렌더링 하길래 데이터가 변할 떄마다 새롭게 리렌더링 하면서 성능을 아끼고 최적의 사용자 경험을 제공하는지 알려면 리액트 컴포넌트가 최초로 실행한 **초기 렌더링** 과 컴포넌트 변경으로 다시 실행되는 **리렌더링** 개념을 이해해야함



## 1.2 초기 렌더링

어떤 UI관련 프레임워크, 라이브러리를 사용하던지 맨 처음 어떻게 보일지를 정하는 초기 렌더링이 필요함. 리액트에서는 이를 다루는 render 함수가 있음

render() {...}

 이 함수는 컴포넌트가 어떻게 생겼는지 정의하는 역할을 함

이 함수는 html형식의 문자열을 반환하지 않고 뷰가 어떻게 생겼고 어떻게 작동하는지에 대한 정보를 지닌 객체를 반환함. 컴포넌트 내부에는 또 다른 컴포넌트들이 들어갈 수 있는데, 이때 render함수를 실행하면 그 내부에 있는 컴포넌트들도 재귀적으로 렌더링함. 이렇게 최상위 컴포넌트의 렌더링 작업이 끝나면 지니고 있는 정보들을 사용하여 HTML 마크업을 만들고, 이를 우리가 정한느 실제 페이지의 DOM요소 안에 주입함



렌더링 -> HTML마크업 -> DOM에 주입 -> 화면



컴포넌트를 실제 페이지에 렌더링할 때는 분리된 두 가지 절차를 따르는데, 먼저 문자열 형태의 HTML 코드를 생성한 후 특정 DOM에 해당 내용을 주입하면 이벤트가 적용됨



### 1.2.1 조화과정

 리액트에서 뷰를 업데이트 할때는 업데이트 과정을 거친다 라고 하기보다 "조화 과정"을 거친다고 하는것이 정확한 표현임.

=> 컴포넌트에서 데이터에 변화가 있을 떄 우리가 보기에는 변화에 따라 뷰가 변형되는것 처럼 보이지만 실제로는 새로운 요소로 갈아 끼우는 것이기 때문



 위 작업은 render 함수가 맡아서 함. 아까 말했듯 render함순느 뷰가 어떻게 생겼고 작동하는지 객체를 반환함. 컴포넌트는 데이터를 업데이트 했을 떄 단순히 업데이트한 값을 수정하는 것이 아니라, 새로운 데이터를 가지고 render 함수를 다시 호출함. 이 후 render함수가 반환하는 결과를 이전에 render 함수가 만들었던 컴포넌트 정보와 현재 render 함수가 만든 컴포넌트 정보를 비교함.

 JS 사용하여 두 가지 뷰를 최소한의 연산으로 비교한 후 둘의 차이를 알아내 최소한 연산으로 DOM트리를 업데이트 함.



# 1.3 리액트 특징

리액트의 주요 특징중 하나는 virtual DOM을 사용하는 것



DOM이 느려 보이는 이유는DOM자체를 읽고 쓸 때의 성능은 자바스크립트 객체를 처리할 떄의 성능과 비교하여 다르지 않음 단, 웹 브라우저 단에서 DOM에 변화가 일어나면 웹 브라우저가 CSS를 다시 연산하고 레이아웃을 구성하고 페이지를 리페인트 하기 때문에 시간이 허비됨 그래서 느려 보이는것



해결법

 DOM을 조작할 떄마다 엔진이 웹 페이지를 새로 그리면 성능이 저하됨 이런 문제를 해결하기 위해 리액트는 Virtual DOM 방식을 사용하여 DOM 업데이트를 추상화 함으로써 DOM처리 횟수를 최소화하고 효율적으로 진행함.



## 1.3.1 Virtual DOm

Virtual DOm을 사용하면 실제 DOm에 접근하는 대신 이를 추상화한 자바스크립트 객체를 구성하여 사용함. 마치 실제 DOM의 가벼운 사본과 비슷함.



리액트에서 데이터가 변하여 웹 브라우저에 실제 DOM을 업데이트할 때는 다음 세 가지 절차를 밟음.

1. 데이터를 업데이트하면 전체 UI를 Virtual DOM에 리렌더링 함.
2. 이전 Virtual DOM에 있던 내용과 현재 내용을 비교함.
3. 바뀐 부분만 실제 DOM에 적용함



가상돔은 지속적으로 데이터가 변화하는 대규모 애플리케이션을 구축할 때 빠릅니다. 단순 라우팅 정도만 있는 정적 페이지는 리액트를 사용하지 않는 편이 더 나은 성능을 보입니다.

리액트와 Virtual DOm이 언제나 제공할 수 있는 것은 바로 업데이트 처리 간결성.



## 리액트 프로젝트 생성하기

create-react-app은 리액트 프로젝트 생성할 때 필요한 웹팩, 바벨의 설치 과정을 생랴갛고 간편하게 작업 환경을 구축해주는 도구

create-react-app

- 왜 유용한가?

  이 패키지로 만든 프로젝트는 복잡한 애플리케이션 개발을 위해 설계됐으며, 개발, 테스트,배포를 위한 일체의 수단을 제공한다.

  



### src 폴더

![image](https://user-images.githubusercontent.com/68668924/112798497-ee7c6500-90a7-11eb-8f35-c9febceee232.png) 



- index.js

  애플리케이션 구성과 실행을 책임진다.

- index.css

  애플리케이션을 위한 전역 CSS스타일을 포함한다.

- App.js

  최상위 리액트 컴포넌트를 포함한다

- App.test.js

  최상위 컴포넌트에 대한 유닛 테스틑 포함한다.

- serviceWorker.js

  오프라인에서도 작동하는 프로그레시브 엡앱 에서 사용된다.

- logo.svg

  리액트 로고에 해당하는 이미지 파일이며, 프로젝트가 생성될때 임시 컴포넌트로서 사용된다.

### 패키지 폴더

 JS 앱개발은 풍부한 패키지 생태계에 의존하는데, 수작업으로 관리하기에는 복잡해서 패키지 관리자라고 하는 소프트웨어를 사용한다. NPM과 Yarn이 있다.

패키지 관리자는 패키지 목록이 완성되면 해당 패키지들을 모두 다운하고 node_moudules 폴더에 설치한다.

초기 패키지 목록은 dependencies와 devDependencies라는 프로퍼리르 사용해 package.json에 의할 수 있다.

앱 실행에 필요한 패키지는 dependencies 절에 나열, 개발할 떄는 필요하다 배포할 때는 포함시키지 않을 패키지들은 devDependencies절에 나열한다.





### 리액트 개발 도구

프로젝트에 추가된 리액트 개발 도구는 src폴더 안의 변격ㅇ을 자동으로 감지해 애플리케이션응ㄹ 컴파일하고 브라우저가 사용할 파일들을 패키징한다.

 개발 도구가 사용하는 핵심 패키지 중의 하나는 많은 자바스크립트 개발 도구와 프레임 워크의 근간인 **웹팩**이다 웹팩은 자바스크립트 모듈을 브라우저가 상욯라 수 있게 해키징하는 **모듈 번들러**다



**웹팩**은 먼저 index.js 파일부터 시작하는데, 의존성 집합을 만들기 위한 import 구문이 있는 모든 모듈을 로딩한다. 이 과정은 index.js가 의존하는 각 모듈마다 반복되며, 전체 애플리케이션의 의존성 파일들이 모두 완성될 때까지 계속된다. 그 다음엔 그 파일들을 이른바 번들이라고 하는 하나의 파일로 통합한다.



### 컴파일과 변환 과정의 이해

빌드 과정은 웹팩이 수행하며, 핵심 단계 중 하나인 코드 변환은 **바벨**이라는 패키지가 수행한다. 리액트 프로젝트에 있어서 바벨은 두 가지 중요한 임무를 갖는데 한 가지는 JSX몬켄츠를 변환하는 작업이며 다른 하나는 구식 브라우저에서도 최신 자바스크립트 기능이 실행될 수 있게 자바스크립트 코드를 변환하는 작업이다.



### 개발 HTTP 서버

웹팩에 통합되는 HTTP 서버인 webpack-dev-server 패키지를 추가하면 이 개발 HTTP서버는 번들을 만드는 작업이 끝나면 즉시 3000번 포트를 통해 HTTP요청을 리스닝하도록 설정돼 있다. 이 서버는 HTTP요청을 받으면 public/index.html 파일의 콘텐츠를 리턴한다. HTTP 서버는 브라우저가 로딩해야 하는 파일을 알려주는 script엘리먼트들을 포함시킨다.



### 정적 콘텐츠

import 키워드를 사용해 정적 콘텐츠로의 의존성을 선언하면 콘텐츠를 어떻게 다룰지에 대한 결정은 개발 도구가 하게 된다. 10Kb보다 작은 파일의 경우 그 콘텐츠는 HTML문서에 콘텐츠를 추가하는 자바스크립트 코드와 함께 bundle.js 파일에 포함될 것이다. SVG파일과 같은 큰 파일은 별도 HTTP요청으로 처리된다. import구문에서 정한 상대 경로는 URL로 자동 변경되고 파일명도 체크섬을 포함하는 이름으로 바뀜으로써 브라우저가 이전 데이터를캐싱하지 않게 만든다.





## 정적 콘텐츠를 위한 public폴더

정적 콘텐츠를 위해 scr폴더를 사용하는 방법엔 여러 이점이 있다. 그러나 모든 프로젝트에는 적합하지 않다. 개발자 판단에 따라 사용